import{ax as k,ay as d,r as t,j as e,B as c,q as h,D as I,C as T,I as v,y as C}from"./index-Boqrr96T.js";import{C as P}from"./config-global-BwHnWRtc.js";import{T as u}from"./TextField-C2NfKL4Q.js";import{I as E}from"./InputAdornment-DpFWJgL8.js";import"./formControlState-CgsDVdLy.js";function F(){const p=k(),x=d(s=>s.setToken),m=d(s=>s.setTokenRefresh),[o,f]=t.useState(""),[a,g]=t.useState(""),[n,j]=t.useState(!1),[r,i]=t.useState(!1),y=async()=>{i(!0);try{const s=await fetch("https://fulbrightmathapi.onrender.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify({email:o,password:a})});if(console.log("Response:",s),!s.ok)throw new Error("เข้าสู่ระบบไม่สำเร็จ");const l=await s.json(),b=l.access_token,w=l.refresh_token;x(b),m(w),p.push("/")}catch{alert("อีเมลหรือรหัสผ่านไม่ถูกต้อง")}finally{i(!1)}},S=e.jsxs(c,{sx:{display:"flex",alignItems:"flex-end",flexDirection:"column"},children:[e.jsx(u,{fullWidth:!0,name:"email",label:"Email address",value:o,onChange:s=>f(s.target.value),sx:{mb:3},slotProps:{inputLabel:{shrink:!0}}}),e.jsx(u,{fullWidth:!0,name:"password",label:"Password",value:a,type:n?"text":"password",onChange:s=>g(s.target.value),slotProps:{inputLabel:{shrink:!0},input:{endAdornment:e.jsx(E,{position:"end",children:e.jsx(T,{onClick:()=>j(!n),edge:"end",children:e.jsx(v,{icon:n?"solar:eye-bold":"solar:eye-closed-bold"})})})}},sx:{mb:3}}),e.jsx(C,{fullWidth:!0,size:"large",color:"inherit",variant:"contained",onClick:y,disabled:r,children:r?"Signing in...":"Sign in"})]});return e.jsxs(e.Fragment,{children:[e.jsx(c,{sx:{gap:1.5,display:"flex",flexDirection:"column",alignItems:"center",mb:5},children:e.jsx(h,{variant:"h5",children:"Sign in"})}),S,e.jsx(I,{sx:{my:3,"&::before, &::after":{borderTopStyle:"dashed"}},children:e.jsx(h,{variant:"overline",sx:{color:"text.secondary",fontWeight:"fontWeightMedium"}})})]})}function L(){return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`Sign in - ${P.appName}`}),e.jsx(F,{})]})}export{L as default};
